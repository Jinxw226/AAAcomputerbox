#union #unionall
在 SQL 中，**UNION** 和 **UNION ALL** 都用于合并两个或多个结果集，但它们在处理重复记录和排序方面存在显著差异。

# UNION

**UNION** 操作会对结果集进行去重和排序。它会删除所有重复的记录，并返回一个不包含重复行的结果集。这意味着在使用 **UNION** 时，数据库会对结果进行排序，然后删除重复的记录，这个过程会消耗一定的 CPU 和内存资源。

示例：
```sql
SELECT * FROM student
UNION
SELECT * FROM teacher;
```

在这个示例中，如果 _student_ 表和 _teacher_ 表中有相同的记录，这些记录在结果集中只会显示一次。

# UNION ALL

**UNION ALL** 操作不会对结果集进行去重和排序。它会直接返回所有的记录，包括重复的记录。因此，**UNION ALL** 的性能通常比 **UNION** 更好，因为它不需要进行去重和排序操作。

示例：
```sql
SELECT * FROM student
UNION ALL
SELECT * FROM teacher;
```
在这个示例中，如果 _student_ 表和 _teacher_ 表中有相同的记录，这些记录在结果集中会显示多次。


性能比较

由于 **UNION** 需要对结果集进行去重和排序，因此它的性能通常比 **UNION ALL** 差。在处理大数据量时，尽量避免使用 **UNION**，而优先选择 **UNION ALL**。

使用建议

1. **数据量较大时，优先使用 UNION ALL**：因为去重和排序会消耗大量资源。
2. **需要去重时使用 UNION**：如果确实需要去除重复记录，可以使用 **UNION**。
3. **确保查询条件的一致性**：在进行联合查询时，确保选择的字段是相同的，否则可能会出现数据对不齐的情况。
4. **利用索引提高查询速度**：在联合查询中，可以利用索引来提高查询速度。
